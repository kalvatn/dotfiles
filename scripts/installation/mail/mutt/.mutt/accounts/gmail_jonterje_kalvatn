# vim: filetype=muttrc
# receive
set folder = "imaps://imap.gmail.com/"
set imap_user = "jonterje.kalvatn@gmail.com"
set imap_pass = `secret-tool lookup mail jonterje.kalvatn@gmail.com`

# send
set smtp_url = "smtps://jonterje.kalvatn@smtp.gmail.com"
set smtp_pass = `secret-tool lookup mail jonterje.kalvatn@gmail.com`
set from = "jonterje.kalvatn@gmail.com"
set hostname = "gmail.com"
set ssl_force_tls = yes

# mailboxes
set spoolfile = +INBOX
mailboxes = "+[Gmail]/All Mail"
set imap_check_subscribed
set postponed = "+[Gmail]/Drafts"
set mbox="+[Gmail]/All Mail"
# unset record as gmail smtp does this by default
unset record

# bindings
bind editor <space> noop
macro index,pager a "<save-message>=[Gmail]/All Mail<enter><enter>" "Archive"
macro index,pager d "<save-message>=[Gmail]/Trash<enter><enter>" "Trash"
macro index gi "<change-folder>=INBOX<enter>" "Go to inbox"
macro index ga "<change-folder>=[Gmail]/All Mail<enter>" "Go to all mail"
macro index gs "<change-folder>=[Gmail]/Starred<enter>" "Go to starred messages"
macro index gd "<change-folder>=[Gmail]/Drafts<enter>" "Go to drafts"

# required to not overwrite credentials when switching accounts
account-hook $folder "set imap_user = $imap_user imap_pass = $imap_pass"
account-hook $smtp_url "set smtp_url = $smtp_url smtp_pass = $smtp_pass
